(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{361:function(e,t,s){e.exports=s.p+"assets/img/dashboard-hello-world-status.cf5c6d54.png"},362:function(e,t,s){e.exports=s.p+"assets/img/dashboard-hello-world-logs.0c0ebfb6.png"},363:function(e,t,s){e.exports=s.p+"assets/img/dashboard-echo-deployment.4dfa734c.png"},413:function(e,t,s){"use strict";s.r(t);var a=s(4),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"basic-kubernetes-objects"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-kubernetes-objects"}},[e._v("#")]),e._v(" Basic Kubernetes Objects")]),e._v(" "),a("p",[e._v("The minimum unit of deployment in a Kubernetes cluster is a "),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pod"),a("OutboundLink")],1),e._v(". This might surprise many, since you might have guessed the minimum unit is a docker container! While in many cases a "),a("code",[e._v("Pod")]),e._v(" is made of a single container, it does not necessarily need to be, and this flexibility allows for some advanced patterns like "),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/pods/init-containers/",target:"_blank",rel:"noopener noreferrer"}},[e._v("init containers"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://kubernetes.io/blog/2015/06/the-distributed-system-toolkit-patterns/",target:"_blank",rel:"noopener noreferrer"}},[e._v("sidecar containers"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Furthermore, a "),a("code",[e._v("Pod")]),e._v(" is just one of the many different Kubernetes objects that you can use to interact with the cluster. During this module we will explore one you have already seen, the "),a("code",[e._v("Namespace")]),e._v(", and introduce a third one, the "),a("code",[e._v("Deployment")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("Confused?")]),e._v(" "),a("p",[e._v("Don't worry if this seems initially confusing, you are not alone ðŸ˜­")]),e._v(" "),a("p",[e._v("During the rest of this tutorial we will keep things simple so you can safely assume "),a("em",[e._v("1 Pod == 1 Container")]),e._v(". After all, this is the most common use case in Kubernetes. As you get familiar with Kubernetes, it will be easier to understand how a "),a("code",[e._v("Pod")]),e._v(" is different from a docker container")])]),e._v(" "),a("h2",{attrs:{id:"pods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pods"}},[e._v("#")]),e._v(" Pods")]),e._v(" "),a("h3",{attrs:{id:"deploying-containers-using-pods-and-manifests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-containers-using-pods-and-manifests"}},[e._v("#")]),e._v(" Deploying containers using Pods and manifests")]),e._v(" "),a("p",[e._v("We will begin by deploying a very simple container, which is the "),a("a",{attrs:{href:"https://hub.docker.com/_/hello-world",target:"_blank",rel:"noopener noreferrer"}},[e._v("hello-world"),a("OutboundLink")],1),e._v(" container available in Docker hub. To do so, we need to define the Pod using "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/YAML",target:"_blank",rel:"noopener noreferrer"}},[e._v("YAML"),a("OutboundLink")],1),e._v(". The definition of all the Pod properties is known as a "),a("strong",[e._v("manifest")]),e._v(".")]),e._v(" "),a("blockquote",[a("p",[e._v("A manifest is nothing but the definition of a Kubernetes object, in this case a "),a("code",[e._v("Pod")]),e._v(", using YAML.")])]),e._v(" "),a("p",[e._v("The most basic Pod manifest looks as follows:")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" hello\n")])])]),a("p",[e._v("Such a basic Pod manifest is simply a way of telling Kubernetes which container do we want to deploy as indicated by the "),a("code",[e._v("spec")]),e._v(" definition:")]),e._v(" "),a("ul",[a("li",[e._v("The "),a("code",[e._v("image")]),e._v(" parameter defines which docker container image should be deployed. Of course, Kubernetes need to to know about the docker registry where this image lives so it can pull the image, but since the image "),a("code",[e._v("hello-world")]),e._v(" lives in the default DockerHub registry, this is not a problem.")]),e._v(" "),a("li",[e._v("As you can see the YAML structure allows more than one container to be defined as part of a single Pod (note that in the YAML, "),a("code",[e._v("containers")]),e._v(" is a list). Like we said at the beginning, we will keep things simple and during the tutorial we will use one container per Pod.")]),e._v(" "),a("li",[e._v("This also means the "),a("code",[e._v("name")]),e._v(" parameter inside the "),a("code",[e._v("spec")]),e._v(" is not so interesting, but in cases where each Pod contains more than one container this parameter lets you identify each of them within the Pod.")])]),e._v(" "),a("p",[e._v("In addition, the "),a("code",[e._v("metadata")]),e._v(" section which gives extra information to Kubernetes, such as the "),a("code",[e._v("Namespace")]),e._v(" this object belongs to and the name of the object. (We will see more on namespaces right in the next section).")]),e._v(" "),a("p",[e._v("You can deploy this "),a("code",[e._v("Pod")]),e._v(" to your cluster using the "),a("code",[e._v("kubectl apply")]),e._v(". There are 2 common ways of doing so:")]),e._v(" "),a("ul",[a("li",[e._v("You save the manifest to a file such as "),a("code",[e._v("my-pod.yaml")]),e._v(" and pass the filename to kubectl:"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl apply -f my-pod.yaml\n")])])])]),e._v(" "),a("li",[e._v("You inline the YAML definition to kubectl as in:"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v("EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" kubectl apply -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: my-first-pod\nspec:\n  containers:\n  - image: hello-world\n    name: hello\nEOF\n")])])])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("Note, you could also use the "),a("code",[e._v("kubectl create pod")]),e._v(" command. However, "),a("code",[e._v("apply")]),e._v(" is a more powerful and general command, which will work for any kind of Kubernetes object described by its manifest. We will keep using the "),a("code",[e._v("apply")]),e._v(" command through the tutorial!")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("Do you have trouble pulling images?")]),e._v(" "),a("p",[e._v("This is likely to be due to the "),a("a",{attrs:{href:"https://github.com/kubernetes/minikube/issues/4589",target:"_blank",rel:"noopener noreferrer"}},[e._v("following issue"),a("OutboundLink")],1),e._v(". Try restarting minikube by running "),a("code",[e._v("minikube stop && minikube delete && minikube start")]),e._v(" (might take a while to run)")])]),e._v(" "),a("p",[e._v("In both cases your should get the confirmation output: "),a("code",[e._v("pod/my-first-pod created")]),e._v(". If you want, you can run the usual "),a("code",[e._v("kubectl get pod")]),e._v(" command to verify:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pod my-first-pod\nNAME                              READY   STATUS      RESTARTS   AGE\nmy-first-pod                      "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9")]),e._v("          21m\n")])])]),a("p",[e._v("Therefore, Kubernetes provides a "),a("em",[e._v("declarative interface")]),e._v(". You "),a("em",[e._v("declare")]),e._v(" what you want to host in your cluster by listing its properties in these manifests, and Kubernetes will take care of actually doing the work:")]),e._v(" "),a("ul",[a("li",[e._v("Every time an object is created, like the "),a("code",[e._v("Pod")]),e._v(" we just created, the definition of that object is added to a distributed database that lives in the master nodes of your cluster, the "),a("strong",[e._v("etcd database")]),e._v(".")]),e._v(" "),a("li",[e._v("Kubernetes masters will then do its best to deploy these objects across all the available resources (ie, worker nodes) of your cluster.")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("If your cluster were to lose all of its "),a("strong",[e._v("worker")]),e._v(" nodes, as soon as new VMs replacing the ones you lost are created, the masters will be able to automatically redeploy the same objects!")]),e._v(" "),a("p",[e._v("If you lose all the "),a("strong",[e._v("masters")]),e._v(", you will lose the ability to manage your cluster (as in deploy, redeploy or inspect existing applications). Once new nodes replace the lost masters, you will then need to restore the "),a("strong",[e._v("etcd database")]),e._v(" from a backup.")])]),e._v(" "),a("p",[e._v("We can actually use "),a("code",[e._v("kubectl")]),e._v(" to inspect the full YAML manifest of any object in your cluster. For example, you can retrieve the manifest we just created with:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pod my-first-pod -o yaml\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("You will receive a much larger output than the simple manifest you created. Don't worry, those are all default values and/or metadata added by kubernetes and minikube.")])]),e._v(" "),a("p",[e._v("We can also see some verbose description in an easier human readable form using the "),a("code",[e._v("kubectl describe")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl describe pod my-first-pod\n")])])]),a("h3",{attrs:{id:"inspecting-the-pod-status"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inspecting-the-pod-status"}},[e._v("#")]),e._v(" Inspecting the Pod status")]),e._v(" "),a("p",[e._v("So far, we have deployed a "),a("code",[e._v("Pod")]),e._v(" to the cluster. However, how can you be sure that Kubernetes actually "),a("em",[e._v("hosted")]),e._v(" and "),a("em",[e._v("run")]),e._v(" the container? Ie, we want to verify that our application actually "),a("em",[e._v("did run")]),e._v(".")]),e._v(" "),a("p",[e._v("Remember that we deployed a simple "),a("code",[e._v("hello-world")]),e._v(" container. All it is supposed to do is to to print a message to the console and terminate.")]),e._v(" "),a("p",[e._v("Let's verify that was the case:")]),e._v(" "),a("ul",[a("li",[e._v("We can see the container is in the terminated state, meaning its main process has already exited:"),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pods\nNAME                              READY   STATUS      RESTARTS   AGE\nmy-first-pod                      "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9")]),e._v("          21m\n")])])])]),e._v(" "),a("li",[e._v("We can retrieve the standard output from the Pod's container using the "),a("code",[e._v("kubectl logs")]),e._v(". We can then verify the expected message was printed to the console:")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl logs my-first-pod\nHello from Docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(". The Docker client contacted the Docker daemon.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(". The Docker daemon pulled the "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"hello-world"')]),e._v(" image from the Docker Hub.\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(". The Docker daemon created a new container from that image "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("which")]),e._v(" runs the\n    executable that produces the output you are currently reading.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v(". The Docker daemon streamed that output to the Docker client, "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("which")]),e._v(" sent it\n    to your terminal.\n\nTo try something "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("more")]),e._v(" ambitious, you can run an Ubuntu container with:\n$ docker run -it ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n\nShare images, automate workflows, and "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("more")]),e._v(" with a "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("free")]),e._v(" Docker ID:\nhttps://hub.docker.com/\n\nFor "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("more")]),e._v(" examples and ideas, visit:\nhttps://docs.docker.com/get-started/\n")])])]),a("p",[e._v("In addition to this, since we have enabled the Kubernetes dashboard in minikube, we can see the the Pod, its status and the logs directly in the browser:\n"),a("img",{attrs:{src:s(361),alt:"Inspecting the Pod in the dashboard"}}),e._v(" "),a("img",{attrs:{src:s(362),alt:"Checking the container logs in the dashboard"}})]),e._v(" "),a("p",[e._v("Let's finish the section by cleaning up and removing the "),a("code",[e._v("Pod")]),e._v(". We simply use the "),a("code",[e._v("kubectl delete")]),e._v(" command to remove objects:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl delete pod my-first-pod\n")])])]),a("h2",{attrs:{id:"namespaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#namespaces"}},[e._v("#")]),e._v(" Namespaces")]),e._v(" "),a("h3",{attrs:{id:"what-s-a-namespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-s-a-namespace"}},[e._v("#")]),e._v(" What's a namespace?")]),e._v(" "),a("p",[e._v("Remember the command we run during the Getting Started section in order to see all the Pods contained by our newly initialized cluster?")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pods --all-namespaces\nNAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE\nkube-system   coredns-66bff467f8-6khs7           "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   coredns-66bff467f8-w8x67           "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   etcd-minikube                      "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   kube-apiserver-minikube            "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   kube-controller-manager-minikube   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   kube-proxy-m7mrz                   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   kube-scheduler-minikube            "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\nkube-system   storage-provisioner                "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          53m\n")])])]),a("p",[e._v("We used the "),a("code",[e._v("all-namespaces")]),e._v(" option, which as you can guess, tells "),a("code",[e._v("kubectl")]),e._v(" to consider any "),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Namespace"),a("OutboundLink")],1),e._v(" when running the command. Thus, it has found several "),a("code",[e._v("Pods")]),e._v(" within the "),a("strong",[e._v("kube-system")]),e._v(" Namespace.")]),e._v(" "),a("p",[e._v("If you omit the argument, "),a("code",[e._v("kubectl")]),e._v(" assumes you mean the "),a("em",[e._v("default")]),e._v(" "),a("code",[e._v("Namespace")]),e._v(", and you will see the following output (assuming you deleted the hello-world Pod at the end of the earlier section):")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pods\nNo resources found.\n")])])]),a("p",[e._v("You could also manually provide the name of the "),a("code",[e._v("Namespace")]),e._v(" you are looking for. Since we know all those "),a("code",[e._v("Pods")]),e._v(" were in the "),a("strong",[e._v("kube-system")]),e._v(" namespace, you could also list them with any of these 2 commands:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl get pods --namespace kube-system\n$ kubectl get pods -n kube-system\n")])])]),a("p",[e._v("Similarly, all created objects are assigned to a "),a("code",[e._v("Namespace")]),e._v(". Every manifest can include a "),a("code",[e._v("namespace")]),e._v(" property as part of its "),a("code",[e._v("metadata")]),e._v(" section, which defines the Namespace for that object. And if omitted, the object will be created in the "),a("em",[e._v("default")]),e._v(" namespace:")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("pod\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# omit the namespace field and this object will be created in the default namespace!")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("namespace\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world\n")])])]),a("p",[e._v("So what is a "),a("code",[e._v("Namespace")]),e._v("? It is nothing but a way to organize all of the Kubernetes objects, such as a "),a("code",[e._v("Pod")]),e._v(". Every time a Kubernetes object is created, you need to specify at least 2 pieces of "),a("em",[e._v("metadata")]),e._v(":")]),e._v(" "),a("ul",[a("li",[e._v("To which "),a("code",[e._v("Namespace")]),e._v(" it belongs (Where the "),a("em",[e._v("default")]),e._v(" namespace will be used when a explicit one is omitted)")]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("name")]),e._v(" of the object, which should be unique across the assigned "),a("code",[e._v("Namespace")])])]),e._v(" "),a("h3",{attrs:{id:"benefits-of-using-namespaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#benefits-of-using-namespaces"}},[e._v("#")]),e._v(" Benefits of using Namespaces")]),e._v(" "),a("p",[e._v("Why are "),a("code",[e._v("Namespaces")]),e._v(" useful? Why does Kubernetes insist in each object belonging to a "),a("code",[e._v("Namespace")]),e._v("?")]),e._v(" "),a("p",[e._v("It is an important design choice of Kubernetes, fundamental in enabling or simplifying scenarios such as:")]),e._v(" "),a("ul",[a("li",[e._v("You can have 2 Pods with the same name (like "),a("code",[e._v("webtool")]),e._v(") across different namespaces. This lets you replicate the same application across different tiers using namespaces such as "),a("em",[e._v("dev")]),e._v(", "),a("em",[e._v("staging")]),e._v(" and "),a("em",[e._v("prod")]),e._v(".")]),e._v(" "),a("li",[e._v("It will let you group under the same "),a("code",[e._v("Namespace")]),e._v(" all the related objects belonging to a particular application")]),e._v(" "),a("li",[e._v("It will simplify administration tasks such as "),a("em",[e._v("permissions")]),e._v(", "),a("em",[e._v("resource management")]),e._v(" or "),a("em",[e._v("networking policies")]),e._v(" by defining them at the "),a("code",[e._v("Namespace")]),e._v(" level rather than per individual object (so it affects all the objects defined in that particular Namespace)")])]),e._v(" "),a("p",[e._v("Take your time to understand the basics about "),a("code",[e._v("Pods")]),e._v(" and "),a("code",[e._v("Namespaces")]),e._v(". Alongside "),a("code",[e._v("Deployments")]),e._v(" (which we will cover next), these are the most fundamental and common objects you will use in Kubernetes to host your applications.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Namespaces in the tutorial")]),e._v(" "),a("p",[e._v("In order to keep things simple, we will keep using the "),a("em",[e._v("default")]),e._v(" Namespace through most of the tutorial. However, anything we do can be applied to specific namespaces by adding the desired namespace to the YAML manifests or kubectl commands.")])]),e._v(" "),a("p",[e._v("As an exercise, go back to the previous section, but this time deploy 2 Pods both named "),a("code",[e._v("hello-world")]),e._v(" into 2 different namespaces")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v("EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" kubectl apply -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: my-first-pod\n  namespace: my-namespace1\nspec:\n  containers:\n  - image: hello-world\n    name: hello\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: my-first-pod\n  namespace: my-namespace2\nspec:\n  containers:\n  - image: hello-world\n    name: hello\nEOF\n")])])]),a("p",[e._v("Notice how:")]),e._v(" "),a("ul",[a("li",[e._v("The "),a("code",[e._v("kubectl get pod")]),e._v(" command will not return the created Pods unless you either explicitly provide a namespace (as in "),a("code",[e._v("-n my-namespace1")]),e._v(") or all of them (as in "),a("code",[e._v("--all-namespaces")]),e._v(")")]),e._v(" "),a("li",[e._v("The same applies to other "),a("code",[e._v("kubectl")]),e._v(" commands such as the ones used to retrieve the logs or describe the pods.")]),e._v(" "),a("li",[e._v("The dashboard shows the Pods under the expected namespaces")])]),e._v(" "),a("p",[e._v("Try also to create both Pods in the same namespace and see what happens!")]),e._v(" "),a("h2",{attrs:{id:"deployments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployments"}},[e._v("#")]),e._v(" Deployments")]),e._v(" "),a("p",[e._v("So far we have looked at "),a("code",[e._v("Pods")]),e._v(", which are the minimum deployment unit in Kubernetes. However, you will rarely deploy a Pod directly!")]),e._v(" "),a("p",[e._v("Instead you will do so through a "),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Deployment"),a("OutboundLink")],1),e._v(" object. It is a different type of object, one that "),a("em",[e._v("declares")]),e._v(" to Kubernetes how many instances of each Pod would you like to have alive at any point in time. Ie, if one of those Pods fails or terminates, Kubernetes should try to create a new Pod.")]),e._v(" "),a("blockquote",[a("p",[e._v("Simplifying a bit, "),a("code",[e._v("Pods")]),e._v(" and "),a("code",[e._v("Deployments")]),e._v(" are the equivalent of "),a("em",[e._v("objects")]),e._v(" and "),a("em",[e._v("classes")]),e._v(" in programming languages.")])]),e._v(" "),a("h3",{attrs:{id:"controlling-pods-with-deployments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controlling-pods-with-deployments"}},[e._v("#")]),e._v(" Controlling Pods with Deployments")]),e._v(" "),a("p",[e._v("Let's take a look at the most simple example, a "),a("code",[e._v("Deployment")]),e._v(" object that deploys a single "),a("code",[e._v("Pod")]),e._v(".")]),e._v(" "),a("p",[e._v("The Pod will consist of an "),a("a",{attrs:{href:"https://minikube.sigs.k8s.io/docs/examples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP echo server"),a("OutboundLink")],1),e._v(" (whose docker image is publicly accessible in google's container registry as part of their minikube examples: "),a("code",[e._v("k8s.gcr.io/echoserver:1.4")]),e._v(").")]),e._v(" "),a("p",[e._v("We can define the manifest and pass it directly to "),a("code",[e._v("kubectl")]),e._v(" in the same way we did to create a "),a("code",[e._v("Pod")]),e._v(" in the previous sections:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v("EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" kubectl apply -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: echo-minikube\nspec:\n  replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n  selector:\n    matchLabels:\n      app: echo-minikube\n  template:\n    metadata:\n      labels:\n        app: echo-minikube\n    spec:\n      containers:\n      - image: k8s.gcr.io/echoserver:1.4\n        name: echoserver\nEOF\n")])])]),a("p",[e._v("It looks similar to the "),a("code",[e._v("Pod")]),e._v(" example we saw earlier, albeit more "),a("em",[e._v("complex")]),e._v(":")]),e._v(" "),a("ul",[a("li",[e._v("The "),a("code",[e._v("Deployment")]),e._v(" object tells Kubernetes how many "),a("code",[e._v("replicas")]),e._v(" (ie, "),a("em",[e._v("instances")]),e._v(") of the "),a("code",[e._v("Pod")]),e._v(" should it keep running. In this example, we want a single replica, so we should end up getting a single container once deployed.")]),e._v(" "),a("li",[e._v("It defines the "),a("code",[e._v("Pod")]),e._v(" as part of the "),a("code",[e._v("template")]),e._v(" field. This is pretty much as if you were to paste the full Pod definition we saw earlier, minus its "),a("code",[e._v("apiVersion")]),e._v(" and "),a("code",[e._v("kind")]),e._v(" properties.")]),e._v(" "),a("li",[e._v("You also need to add a "),a("code",[e._v("selector")]),e._v(". The selector is a way for Kubernetes to find "),a("code",[e._v("Pod")]),e._v(" objects based on metadata such as their labels. The reason why you need to define a selector is for Kubernetes to be able to uniquely identify which "),a("code",[e._v("Pods")]),e._v(" within the "),a("code",[e._v("Namespace")]),e._v(" belong to a "),a("code",[e._v("Deployment")]),e._v(".")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("Defining a "),a("code",[e._v("Deployment")]),e._v(" with a single "),a("code",[e._v("Pod")]),e._v(" and a single container is such a common operation that "),a("code",[e._v("kubectl")]),e._v(" provides a shortcut:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl create deployment echo-minikube --image"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("k8s.gcr.io/echoserver:1.4\n")])])])]),e._v(" "),a("p",[e._v("You might be wondering, what are the benefits of the increased complexity? After all, we are still deploying a single container! While the benefits will become increasingly obvious as you work more with Kubernetes, let us provide some examples:")]),e._v(" "),a("ul",[a("li",[e._v("You can now horizontally scale your "),a("code",[e._v("Pods")]),e._v(" by deploying multiple instances. Combined with "),a("code",[e._v("Services")]),e._v(" (which we will see in the "),a("RouterLink",{attrs:{to:"/tutorials/kubernetes/3-basic-networking.html"}},[e._v("next module")]),e._v("), you have a simple way to scale and load balance your applications.")],1),e._v(" "),a("li",[e._v("You can also be sure that Kubernetes will do its best effort to always keep the desired number of replicas. In case of failure, or even in case one of the cluster nodes gets removed, Kubernetes can try to create a new replica of the same Pod in any other node. Thus, the number of replicas becomes like a contract with Kubernetes.")]),e._v(" "),a("li",[e._v("It provides the perfect for Kubernetes to implement patterns such as or "),a("em",[e._v("rolling updates")]),e._v(" or "),a("em",[e._v("liveness/readiness probes")]),e._v(" can be defined. These patterns give you fine grained control on how your applications are deployed and scaled.")])]),e._v(" "),a("p",[e._v("Now that we are done introducing the "),a("code",[e._v("Deployment")]),e._v(" object, take a moment to inspect the one you just created using the now familiar commands such as "),a("code",[e._v("kubectl get deployment")]),e._v(" or "),a("code",[e._v("kubectl describe deployment")]),e._v(", as well as inspecting it on the dashboard:")]),e._v(" "),a("p",[a("img",{attrs:{src:s(363),alt:"Deployment object in the dashboard"}})]),e._v(" "),a("p",[e._v("Congratulations, you have your first HTTP server deployed in Kubernetes! It's a simple echo server, but the fundamentals you will use to deploy more complex applications are the same.")]),e._v(" "),a("h3",{attrs:{id:"testing-an-http-server-deployed-with-a-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testing-an-http-server-deployed-with-a-deployment"}},[e._v("#")]),e._v(" Testing an HTTP server deployed with a Deployment")]),e._v(" "),a("p",[e._v("Let's finish this module by verifying that your server is working.")]),e._v(" "),a("p",[e._v("In order to do so, we will find out the IP of the single "),a("code",[e._v("Pod")]),e._v(" created by this "),a("code",[e._v("Deployment")]),e._v(", for example using the web dashboard or the "),a("code",[e._v("kubectl describe pod command")]),e._v(" (Note that you need to get the name of the pod first, using the "),a("code",[e._v("kubectl get pod")]),e._v(" command. The actual name of your Pod might vary from the one in the command below)")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl describe pod echo-minikube-858dcd98d6-wfxzq\nName:               echo-minikube-858dcd98d6-wfxzq\nNamespace:          default\nPriority:           "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\nPriorityClassName:  "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nNode:               minikube/192.168.64.3\nStart Time:         Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("29")]),e._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2020")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("20")]),e._v(":59:59 +0100\nLabels:             "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("echo\n                    pod-template-hash"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("858dcd98d6\nAnnotations:        "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nStatus:             Running\nIP:                 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.10\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".many "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("more")]),e._v(" fields omitted\n")])])]),a("p",[e._v("So in my case, I can see the IP assigned to the Pod is "),a("code",[e._v("172.17.0.10")]),e._v(". Itâ€™s important to noticed this is an IP internal to the cluster, ie has no meaning outside our minikube node, for example in your local machine.")]),e._v(" "),a("p",[e._v("How can we then send a simple GET HTTP request to verify our HTTP echo server works as expected? We can use a throwaway interactive Pod using a container such as "),a("a",{attrs:{href:"https://hub.docker.com/_/busybox",target:"_blank",rel:"noopener noreferrer"}},[e._v("busybox"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://hub.docker.com/_/alpine",target:"_blank",rel:"noopener noreferrer"}},[e._v("alpine"),a("OutboundLink")],1),e._v(", which will give us an interactive shell "),a("em",[e._v("inside our cluster")]),e._v(".")]),e._v(" "),a("p",[e._v("In this case we will use "),a("code",[e._v("yauritux/busybox-curl")]),e._v(" so we can send an HTTP request using the command line tool "),a("a",{attrs:{href:"https://ec.haxx.se/",target:"_blank",rel:"noopener noreferrer"}},[e._v("curl"),a("OutboundLink")],1),e._v(". You can get a running instance of this container deployed and attached to an interactive terminal by running the following command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ kubectl run -it --rm --restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("Never busybox --image"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("yauritux/busybox-curl "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v("\nIf you dont see a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("command")]),e._v(" prompt, try pressing enter.\n/ "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n")])])]),a("p",[e._v("You now have a shell executing in a container inside the cluster! This way you can connect to the IP of our echo server, which will be listening on port 8080 ::: tip\nYou need to know which ports are exposed by each Podâ€™s container, either as the author of those containers or by reading through its documentation/source code.\n:::")]),e._v(" "),a("p",[e._v("Run a few simple "),a("code",[e._v("curl")]),e._v(" commands, which should display a successful 200 response from the echo server. For example we can test the echo server works as expected with GET and POST requests:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Test echo server with a GET request")]),e._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.10:8080\nCLIENT VALUES:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("client_address")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.12\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("GET\nreal "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("query")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("nil\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("request_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("request_uri")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("http://172.17.0.10:8080/\n\nSERVER VALUES:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("server_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("nginx: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.10")]),e._v(".0 - lua: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10001")]),e._v("\n\nHEADERS RECEIVED:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("accept")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("*/*\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.10:8080\nuser-agent"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("curl/7.30.0\nBODY:\n-no body "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" request-\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Test echo server with a POST request")]),e._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'{"foo": "bar"}\'')]),e._v(" -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Content-Type: application/json'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.10:8080\nCLIENT VALUES:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("client_address")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.12\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("POST\nreal "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("query")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("nil\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("request_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("request_uri")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("http://172.17.0.10:8080/\n\nSERVER VALUES:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("server_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("nginx: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.10")]),e._v(".0 - lua: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10001")]),e._v("\n\nHEADERS RECEIVED:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("accept")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("*/*\ncontent-length"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("14")]),e._v("\ncontent-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("application/json\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.10:8080\nuser-agent"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("curl/7.30.0\nBODY:\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("That's it, you can be certain the echo server is working as expected. Next, you could remove the "),a("code",[e._v("Deployment")]),e._v(" using the now familiar "),a("code",[e._v("kubectl delete")]),e._v(" command, however we will be using it in the "),a("RouterLink",{attrs:{to:"/tutorials/kubernetes/3-basic-networking.html"}},[e._v("next module")]),e._v(" so leave it in place if you plan to continue the tutorial.")],1),e._v(" "),a("p",[e._v("And this concludes our overview of the basic objects, "),a("code",[e._v("Namespace")]),e._v(", "),a("code",[e._v("Pod")]),e._v(" and "),a("code",[e._v("Deployment")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("You will agree with us that having to find out the Pod's IP feels "),a("em",[e._v("hacky")]),e._v(". And the lack of any explicit declaration of which ports does an application expose feels "),a("em",[e._v("wrong")]),e._v(".")]),e._v(" "),a("p",[e._v("That's why networking basics are the focus of the "),a("RouterLink",{attrs:{to:"/tutorials/kubernetes/3-basic-networking.html"}},[e._v("next module")]),e._v("!")],1)]),e._v(" "),a("tutorial-call-to-action-link",{attrs:{title:"Prev module",to:"./1-clusters-nodes"}}),e._v(" "),a("tutorial-call-to-action-link",{attrs:{title:"Next module",to:"./3-basic-networking"}})],1)}),[],!1,null,null,null);t.default=n.exports}}]);