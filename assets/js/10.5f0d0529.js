(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{354:function(t,e,s){t.exports=s.p+"assets/img/getting-started-actions.5a19fd66.png"},355:function(t,e,s){t.exports=s.p+"assets/img/first-workflow.e19960a5.png"},356:function(t,e,s){t.exports=s.p+"assets/img/running-the-workflow.f2bea496.png"},398:function(t,e,s){"use strict";s.r(e);var a=s(4),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"deploying-to-github-pages-using-github-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-to-github-pages-using-github-actions"}},[t._v("#")]),t._v(" Deploying to GitHub Pages using GitHub Actions")]),t._v(" "),a("p",[t._v("When deploying the Kaizen Dorks website to "),a("a",{attrs:{href:"https://help.github.com/en/github/working-with-github-pages/getting-started-with-github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Pages"),a("OutboundLink")],1),t._v(", I realized that the "),a("a",{attrs:{href:"https://vuepress.vuejs.org/guide/deploy.html#deploying",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress documentation"),a("OutboundLink")],1),t._v(" does not cover how to deploy using "),a("a",{attrs:{href:"https://help.github.com/en/actions/language-and-framework-guides/using-nodejs-with-github-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"how-a-manual-script-looks-like"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-a-manual-script-looks-like"}},[t._v("#")]),t._v(" How a manual script looks like")]),t._v(" "),a("p",[t._v("Before looking at "),a("a",{attrs:{href:"https://help.github.com/en/actions/language-and-framework-guides/using-nodejs-with-github-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions"),a("OutboundLink")],1),t._v(" let's do a quick recap on how a static site such as a vuepress site needs to be deployed to GitHub pages.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("By "),a("em",[t._v("manual script")]),t._v(" I mean one you will manually run from your laptop!")])]),t._v(" "),a("h3",{attrs:{id:"step-sequence"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-sequence"}},[t._v("#")]),t._v(" Step sequence")]),t._v(" "),a("p",[t._v("If you were to manually deploy the static site, the sequence of steps would look as follows:")]),t._v(" "),a("ol",[a("li",[t._v("Check out the branch with your source files")]),t._v(" "),a("li",[t._v("Install your dependencies. In the case of vuepress, you would do "),a("code",[t._v("npm install")]),t._v(" or even better "),a("code",[t._v("npm ci")])]),t._v(" "),a("li",[t._v("Generate the static HTML/JS/CSS files from your source. In the case of vuepress, you would do "),a("code",[t._v("npm run build")])]),t._v(" "),a("li",[t._v("Push the generated files to the "),a("em",[t._v("publishing source")]),t._v(" of your GitHub Pages site.")])]),t._v(" "),a("h3",{attrs:{id:"github-pages-publishing-sources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-pages-publishing-sources"}},[t._v("#")]),t._v(" GitHub Pages publishing sources")]),t._v(" "),a("p",[t._v("The "),a("strong",[t._v("publishing source")]),t._v(" is simply the branch and folder where GitHub should find the static HTML/JS/CSS files for your website. See the GitHub Pages "),a("a",{attrs:{href:"https://help.github.com/en/github/working-with-github-pages/about-github-pages#publishing-sources-for-github-pages-sites",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("What is confusing is that GitHub Pages expects the static HTML/JS/CSS files of your site in a different "),a("em",[t._v("publishing source")]),t._v(" dependending on the type of repo.")]),t._v(" "),a("ul",[a("li",[t._v("For "),a("strong",[t._v("user/organization repos")]),t._v(" the publishing source is always the "),a("code",[t._v("master")]),t._v(" branch (actually the branch configured as the "),a("em",[t._v("main branch")]),t._v(" for that repo)")]),t._v(" "),a("li",[t._v("For "),a("strong",[t._v("normal repos")]),t._v(" you have a couple of options. You can choose between:\n"),a("ul",[a("li",[t._v("the "),a("code",[t._v("gh-pages")]),t._v(" branch")]),t._v(" "),a("li",[t._v("the "),a("code",[t._v("master")]),t._v(" branch")]),t._v(" "),a("li",[t._v("the "),a("code",[t._v("/docs")]),t._v(" folder inside the "),a("code",[t._v("master")]),t._v(" branch")])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("Let's clarify the distinction between normal repos and user/organization repos:")]),t._v(" "),a("ul",[a("li",[t._v("The "),a("strong",[t._v("organization repos")]),t._v(" are the ones named like "),a("code",[t._v("username.github.io")]),t._v(" or "),a("code",[t._v("organization.github.io")]),t._v(". For example, "),a("a",{attrs:{href:"https://github.com/kaizendorks/kaizendorks.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("kaizendorks.github.io"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("li",[t._v("Every other repo is a "),a("strong",[t._v("normal repo")]),t._v(". For example, "),a("a",{attrs:{href:"https://github.com/kaizendorks/vue-autowire",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-autowire"),a("OutboundLink")],1),t._v(".")])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("This affects your development workflow!")]),t._v(" "),a("p",[t._v("In the case of "),a("strong",[t._v("user/organization repos")]),t._v(", since the static files need to be pushed to the "),a("code",[t._v("master")]),t._v(" branch, you are forced to use a different branch to develop your site.")]),t._v(" "),a("p",[t._v("For example, the code that makes this website is located in the "),a("code",[t._v("source")]),t._v(" branch. Whenever changes are made and pushed to the "),a("code",[t._v("source")]),t._v(" branch, the static HTML/JS/CSS files are regenerated and force pushed to the "),a("code",[t._v("master")]),t._v(" branch!")]),t._v(" "),a("p",[t._v("With "),a("strong",[t._v("normal repos")]),t._v(" you can keep developing your site in the "),a("code",[t._v("master")]),t._v(" branch. Whenever changes are made, the updated static HTML/JS/CSS files are pushed to the "),a("code",[t._v("gh-pages")]),t._v(" branch.")])]),t._v(" "),a("h3",{attrs:{id:"a-manual-bash-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a-manual-bash-script"}},[t._v("#")]),t._v(" A manual bash script")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://vuepress.vuejs.org/guide/deploy.html#deploying",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress documentation"),a("OutboundLink")],1),t._v(" covers this in detail, and makes easy to create a bash script that performs those steps.")]),t._v(" "),a("p",[t._v("Let's assume we have a vuepress site as follow:")]),t._v(" "),a("ul",[a("li",[t._v("Uses the "),a("code",[t._v("npm run build")]),t._v(" command to build the static files")]),t._v(" "),a("li",[t._v("Builds the static files in the "),a("code",[t._v("docs/.vuepress/dist")])]),t._v(" "),a("li",[t._v("Its a normal GitHub repo")]),t._v(" "),a("li",[t._v("Will be published to the "),a("code",[t._v("gh-pages")]),t._v(" branch")])]),t._v(" "),a("p",[t._v("Then you create a "),a("code",[t._v("deploy.sh")]),t._v(" script like:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# abort on errors")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# build")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# navigate into the build output directory")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create new git repo from scratch with a single commit containing the generated files")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Force push to the "publishing source" of your GitHub pages site')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# in this case, the gh-pages branch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("USERNAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("REPO"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".git master:gh-pages\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Back to previous directory (the root of your repo)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n")])])]),a("p",[t._v("This should be easy to modify for any other static sites, including non vuepress ones.")]),t._v(" "),a("p",[t._v("For example, this website generates its static files in the "),a("code",[t._v("wwwroot")]),t._v(" folder and the built files need to be pushed to the "),a("code",[t._v("master")]),t._v(" branch (since it is an "),a("em",[t._v("organization repo")]),t._v("). Therefore, we just need to change a couple of lines in the script:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# abort on errors")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# build")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# navigate into the build output directory")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" wwwroot\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create new git repo from scratch with a single commit containing the generated files")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Force push to the "publishing source" of your GitHub pages site')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# in this case, the master branch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:kaizendorks/kaizendorks.github.io.git master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Back to previous directory (the root of your repo)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n")])])]),a("p",[t._v("That's it, this bash script does the job. If you have made changes to your website, you can simply run "),a("code",[t._v("./deploy.sh")]),t._v(" from your laptop and the script will publish the updated site to GitHub pages.")]),t._v(" "),a("h2",{attrs:{id:"deploying-using-github-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-using-github-actions"}},[t._v("#")]),t._v(" Deploying using GitHub Actions")]),t._v(" "),a("p",[t._v("Let's now see how we can replace the bash script with an automated "),a("a",{attrs:{href:"https://help.github.com/en/actions/language-and-framework-guides/using-nodejs-with-github-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions"),a("OutboundLink")],1),t._v(" workflow that performs the same steps whenever we make changes to the site source.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("GithHub actions is a powerful way to automate workflows based on events from your GitHub repository, such as new commits or PRs. It is a fairly new product, with a public beta in 2018 and general CI/CD functionality released to general public in 2019.")]),t._v(" "),a("p",[t._v("As of today, it is already very powerful and flexible. It is based on Docker and makes it easy to create your own actions, with a healthy "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/using-actions-from-github-marketplace",target:"_blank",rel:"noopener noreferrer"}},[t._v("marketplace"),a("OutboundLink")],1),t._v(" of community provided actions available.")]),t._v(" "),a("p",[t._v("Imho, this is a very interesting product. Whether it will dominate the CI arena or not, we'll see!")])]),t._v(" "),a("h3",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),a("p",[t._v("Adding a new workflow using GitHub Pages is very straightforward.")]),t._v(" "),a("p",[t._v("If you open your repo in the GitHub website, you will see an "),a("em",[t._v("Actions")]),t._v(" tab. When you navigate to this tab, you will be greeted with a page that lets you start from some preconfigured workflows or to create your own.\n"),a("img",{attrs:{src:s(354),alt:"Getting started with GitHub Actions"}})]),t._v(" "),a("p",[t._v("Select the option "),a("em",[t._v("Set up a workflow yourself")]),t._v(", where a sample workflow file will be generated for you that showcases the basic of GitHub Actions.\n"),a("img",{attrs:{src:s(355),alt:"Getting started with GitHub Actions"}})]),t._v(" "),a("p",[t._v("As you can see, a workflow in GitHub Actions:")]),t._v(" "),a("ul",[a("li",[t._v("Is defined by a YAML file located inside the "),a("code",[t._v(".github/workflows")]),t._v(" directory of your repo")]),t._v(" "),a("li",[t._v("It is triggered by one or more "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#event",target:"_blank",rel:"noopener noreferrer"}},[t._v("events"),a("OutboundLink")],1),t._v(" of your repo, such as new commits or new PRs")]),t._v(" "),a("li",[t._v("Has a number of "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#job",target:"_blank",rel:"noopener noreferrer"}},[t._v("jobs"),a("OutboundLink")],1),t._v(" that can run either in parallel or in sequence. Each job starts on a fresh instance and does not share state! (unless you push that state somewhere yourself)")]),t._v(" "),a("li",[t._v("Each job has a number of "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#step",target:"_blank",rel:"noopener noreferrer"}},[t._v("steps"),a("OutboundLink")],1),t._v(". These are the individual tasks where you run either bash commands or "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#action",target:"_blank",rel:"noopener noreferrer"}},[t._v("actions"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("The concept of "),a("a",{attrs:{href:"https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#action",target:"_blank",rel:"noopener noreferrer"}},[t._v("action"),a("OutboundLink")],1),t._v(" is very interesting. It lets us encapsulated common tasks so they are easily reusable in workflows. For example, there are actions for checking out your code, for publishing a library to NPM or for pushing changes back to your repo.")]),t._v(" "),a("p",[t._v("Some are officially maintained by GitHub while others are community-driven!")]),t._v(" "),a("h3",{attrs:{id:"building-a-static-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-a-static-site"}},[t._v("#")]),t._v(" Building a static site")]),t._v(" "),a("p",[t._v("Let's get to work and start creating a GitHub Actions workflow to publish a static site.")]),t._v(" "),a("p",[t._v("If your repo doesn't have one, create the directory "),a("code",[t._v(".github/workflows")]),t._v(". Inside the "),a("code",[t._v("workflows")]),t._v(" folder, add a new file "),a("code",[t._v("deploy.yml")]),t._v(" with the following contents:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy to GitHub pages\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this might change depending on whether you are publishing a site for a normal repo or a user/organization repo")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Run a multi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("line script\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        echo test the checkout action,\n        ls -a")]),t._v("\n")])])]),a("p",[t._v("This is a simple workflow with a single job.")]),t._v(" "),a("ul",[a("li",[t._v("It will be triggered when new commits are pushed to master (this might change depending on the type of repo, as per the "),a("a",{attrs:{href:"#github-pages-publishing-sources"}},[t._v("GitHub Pages publishing sources")]),t._v(" discussion)")]),t._v(" "),a("li",[t._v("Runs on an "),a("code",[t._v("ubuntu-latest")]),t._v(" machine. See the documentation on "),a("a",{attrs:{href:"https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on",target:"_blank",rel:"noopener noreferrer"}},[t._v("hosted runners"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("It has 2 steps:\n"),a("ul",[a("li",[t._v("The first one runs the "),a("code",[t._v("checkout")]),t._v(" action, which will checkout the contents of your repo. This is an official action provided by GitHub, and you can see "),a("a",{attrs:{href:"https://github.com/marketplace/actions/checkout",target:"_blank",rel:"noopener noreferrer"}},[t._v("the instructions"),a("OutboundLink")],1),t._v(" in the marketplace.")]),t._v(" "),a("li",[t._v("The second one simply runs regular ubuntu commands so you can test the contents of the local folder after the checkout action (which should contain all the files from your repo)")])])])]),t._v(" "),a("p",[t._v("If you commit this file and go to the "),a("em",[t._v("Actions")]),t._v(" tab of your repo in GitHub, you should see it running. You can see each step and the output of each step:\n"),a("img",{attrs:{src:s(356),alt:"Running the deploy workflow"}})]),t._v(" "),a("p",[t._v("Let's update this workflow so we generate the static HTML/JS/CSS files for our site.")]),t._v(" "),a("p",[t._v("In the case of a vuepress site, we need to run the "),a("code",[t._v("npm run build")]),t._v(" command. In order to do so, we need to add an action that will setup Node.js and its dependencies in the machine running the workflow. Therefore, we will use another official GitHub action, the "),a("code",[t._v("setup-node")]),t._v(" action, whose "),a("a",{attrs:{href:"https://github.com/marketplace/actions/setup-node-js-environment",target:"_blank",rel:"noopener noreferrer"}},[t._v("instructions"),a("OutboundLink")],1),t._v(" you can see in the marketplace.")]),t._v(" "),a("p",[t._v("Let's replace the test steps running the "),a("code",[t._v("echo")]),t._v(" and "),a("code",[t._v("ls")]),t._v(" commands with the ones that will setup node and will run "),a("code",[t._v("npm run build")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rest of the workflow file omitted")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Generate static vuepress files\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm ci\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run build\n")])])]),a("p",[t._v("That's it, now when this workflow runs, it will setup node, install all dependencies and run the "),a("code",[t._v("npm run build")]),t._v(" command. The static HTML/JS/CSS files should be available within the output folder!")]),t._v(" "),a("h3",{attrs:{id:"publishing-the-built-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publishing-the-built-site"}},[t._v("#")]),t._v(" Publishing the built site")]),t._v(" "),a("p",[t._v("If you remember the "),a("a",{attrs:{href:"#step-sequence"}},[t._v("sequence of steps")]),t._v(", all we have to do now is to get the generated static files and push them to the "),a("em",[t._v("publishing source")]),t._v(" of our GitHub Pages site. What we did in the manual bash script was to move to the folder where the files were generated, initialize a new empty git repository and then force push to the publishing source branch.")]),t._v(" "),a("p",[t._v("Let's assume a normal repo using "),a("code",[t._v("gh-pages")]),t._v(" as its publishing source, using vuepress to generate the static files in the "),a("code",[t._v("docs/.vuepress/dist")]),t._v(" folder.")]),t._v(" "),a("ul",[a("li",[t._v("First we need to add the steps to initialize the new repo inside the folder with the static files"),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rest of the workflow file omitted")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Init new repo in dist folder and commit generated files\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n        cd docs/.vuepress/dist\n        git init\n        git add -A\n        git config --local user.email "action@github.com"\n        git config --local user.name "GitHub Action"\n        git commit -m \'deploy\'')]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("Finally, we need to force push those files to the publishing source branch. For that we need to use another action, the "),a("code",[t._v("github-push")]),t._v(" action, which is a community provided one (rather than an official GitHub action). Check out the "),a("a",{attrs:{href:"https://github.com/marketplace/actions/github-push",target:"_blank",rel:"noopener noreferrer"}},[t._v("instructions"),a("OutboundLink")],1),t._v(" in the marketplace, although hopefully the example will be self-explanatory:"),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rest of the workflow file omitted")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Force push to destination branch\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ad"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m/github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v0.5.0\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Token for the repo. Can be passed in using $\\{{ secrets.GITHUB_TOKEN }}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Destination branch to push changes")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use force push to fully overwrite the destination branch")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("force")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# We have to push from the folder where files were generated.")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Same were the new repo was initialized in the previous step")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./docs/.vuepress/dist\n")])])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("The GitHub token used by the last step "),a("code",[t._v("secrets.GITHUB_TOKEN")]),t._v(" is the way GitHub Actions allow you to authenticate with your repo so you can perform actions like push or pull. See the official "),a("a",{attrs:{href:"https://help.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions documentation"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("Behind the scenes, the actions authenticate to your repo using this token and an additional environment variables also provided by GitHub as in:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("https://${GITHUB_ACTOR}:${GITHUB_TOKEN}@github.com/${REPOSITORY}.git\n")])])])]),t._v(" "),a("h2",{attrs:{id:"the-end-result"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-end-result"}},[t._v("#")]),t._v(" The end result")]),t._v(" "),a("p",[t._v("When you put everything we have discussed together, you have a workflow script like the following one:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy to GitHub pages\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this might change depending on whether you are publishing a site for a normal repo or a user/organization repo")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Generate static vuepress files\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm ci\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run build\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Init new repo in dist folder and commit generated files\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n        cd docs/.vuepress/dist\n        git init\n        git add -A\n        git config --local user.email "action@github.com"\n        git config --local user.name "GitHub Action"\n        git commit -m \'deploy\'')]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Force push to destination branch\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ad"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m/github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v0.5.0\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this might change depending on whether you are publishing a site for a normal repo or a user/organization repo")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("force")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./docs/.vuepress/dist\n")])])]),a("h3",{attrs:{id:"adapting-it-to-your-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adapting-it-to-your-site"}},[t._v("#")]),t._v(" Adapting it to your site")]),t._v(" "),a("p",[t._v("It should be relatively straightforward to modify this workflow, adapting it to other static sites and/or different publishing sources.")]),t._v(" "),a("p",[t._v("Let's take this site (the Kaizen Dorks one) as an example:")]),t._v(" "),a("ul",[a("li",[t._v("It is an organization repo, so the destination branch is the "),a("code",[t._v("master")]),t._v(" branch (rather than the "),a("code",[t._v("gh-pages")]),t._v(" one).")]),t._v(" "),a("li",[t._v("That also means our source branch where the workflow should listen for events should be different than the "),a("code",[t._v("master")]),t._v(" branch, in our case this is the "),a("code",[t._v("source")]),t._v(" branch")]),t._v(" "),a("li",[t._v("We have modified the default "),a("code",[t._v("vuepress")]),t._v(" configuration so the static files are generated into the "),a("code",[t._v("wwwroot")]),t._v(" folder rather than the default "),a("code",[t._v("docs/.vuepress/dist")])])]),t._v(" "),a("p",[t._v("There is only a few lines you need to change:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy to GitHub pages\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" source "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Generate static files in wwwroot\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm ci\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run build\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Init new repo in wwwroot and commit generated files\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n        cd wwwroot\n        git init\n        git add -A\n        git config --local user.email "action@github.com"\n        git config --local user.name "GitHub Action"\n        git commit -m \'deploy\'')]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Force push to master\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ad"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m/github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v0.5.0\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("force")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./wwwroot\n")])])]),a("p",[t._v("This is how this website is being published, you can check it on "),a("a",{attrs:{href:"https://github.com/kaizendorks/kaizendorks.github.io/blob/source/.github/workflows/deploy.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("our GitHub repo"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);